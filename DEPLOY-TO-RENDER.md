# 🚀 Deploy GLM-4.6 Container to Render.com

## 📋 Prerequisites
- ✅ GitHub repository with your code
- ✅ Render.com account (free tier available)
- ✅ GLM-4.6 API key from z.ai
- ✅ GitHub OAuth App credentials

## 🔧 Step-by-Step Deployment

### **1. Push to GitHub**
```bash
git add .
git commit -m "Ready for Render deployment - GLM-4.6 container"
git push origin main
```

### **2. Create Render.com Service**
1. Go to [render.com](https://render.com)
2. Sign up/login with GitHub
3. Click **"New +"** → **"Web Service"**
4. Connect your GitHub repository
5. Select **"Docker"** as runtime
6. **Service Details:**
   - Name: `glm-agent-sdk`
   - Region: Choose nearest to you
   - Branch: `main`
   - Root Directory: Leave empty
   - Docker Context: `./`
   - Dockerfile Path: `./Dockerfile`

### **3. Configure Environment Variables**
In Render dashboard, add these environment variables:

**Required:**
```
ANTHROPIC_BASE_URL=https://api.z.ai/api/anthropic
ANTHROPIC_AUTH_TOKEN=your-glm-api-key-here
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
ALLOWED_GITHUB_USERS=your-github-username
```

**Generated by Render:**
```
CLAUDE_AGENT_SDK_CONTAINER_API_KEY=auto-generated
SESSION_SECRET=auto-generated
```

**Optional:**
```
GLM_MODEL=GLM-4.6
PORT=10000
```

### **4. Advanced Settings**
- **Health Check Path:** `/health`
- **Auto-Deploy:** ✅ Enabled
- **Plan:** Free (or Starter for more resources)

### **5. Deploy!**
Click **"Create Web Service"** and wait for deployment.

## 🔍 Post-Deployment Verification

### **Check Health Endpoint**
```
https://your-app-name.onrender.com/health
```

Should return:
```json
{
  "status": "healthy",
  "hasToken": true,
  "provider": "GLM-4.6",
  "sdkLoaded": true
}
```

### **Access Your GLM-4.6 App**
```
https://your-app-name.onrender.com
```

## 🔧 GitHub OAuth Setup for Render

### **Update GitHub OAuth App**
1. Go to GitHub → Settings → Developer settings → OAuth Apps
2. Find your existing GitHub App or create new one
3. **Update Homepage URL:** `https://your-app-name.onrender.com`
4. **Update Authorization callback URL:** `https://your-app-name.onrender.com/auth/github`

## 🚨 Important Notes

### **Free Plan Limitations**
- **512 MB RAM** - May be tight for GLM-4.6
- **Sleeps after 15 minutes** inactivity
- **Cold starts** may take 30-60 seconds

### **Recommendations**
- Use **Starter Plan** ($7/month) for better performance
- Monitor resource usage in Render dashboard
- Set up **GitHub secrets** for sensitive data

### **Troubleshooting**
```bash
# Check deployment logs in Render dashboard
# Look for "Build" and "Service" logs

# Common issues:
# - Out of memory: Upgrade plan
# - Port conflicts: Ensure PORT=10000
# - Environment variables: Double-check spelling
```

## 📊 Monitoring Your Deployment

### **Render Dashboard**
- **Metrics**: CPU, Memory, Response time
- **Logs**: Build and runtime logs
- **Events**: Deployment history

### **Health Monitoring**
```bash
curl https://your-app-name.onrender.com/health
```

## 🔄 CI/CD Integration

Render automatically rebuilds when you push to GitHub:
```bash
git add .
git commit -m "Update GLM-4.6 configuration"
git push origin main
```

## 💡 Pro Tips

1. **Use Environment Branches** for testing
2. **Set up Custom Domain** for production
3. **Configure Backups** for important data
4. **Monitor API usage** with Z.AI dashboard
5. **Set up alerts** for service health

## 🎉 Success!

Once deployed, you'll have:
- ✅ **Public GLM-4.6 API** endpoint
- ✅ **Web CLI interface**
- ✅ **GitHub OAuth** authentication
- ✅ **Automatic HTTPS** via Render
- ✅ **CI/CD** with GitHub integration

Your GLM-4.6 container will be live at: `https://your-app-name.onrender.com`